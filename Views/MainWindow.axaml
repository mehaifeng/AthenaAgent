<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Athena.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="using:Athena.UI.Models"
        xmlns:views="using:Athena.UI.Views"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="700"
        x:Class="Athena.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="ATHENA.SYS // TERMINAL_LINK"
        Width="960" Height="760"
        MinWidth="700" MinHeight="500"
        WindowStartupLocation="CenterScreen"
        Icon="/Assets/avalonia-logo.ico"
        Background="#000000"
        FontFamily="{DynamicResource MonospaceFontFamily}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>


        
    <!-- INNER SCANLINE/GLOW AREA -->
    <Border Padding="4">
        <Grid RowDefinitions="*,Auto">
                
            <!-- TabControl (OS Modules) -->
            <TabControl Grid.Row="0"
                        SelectedIndex="{Binding SelectedTabIndex, UpdateSourceTrigger=PropertyChanged}"
                        Margin="0"
                        Name="MainTabControl">

                <!-- MODULE 0: CHAT -->
                <TabItem Header="[ CHAT_LINK ]">
                    <views:ChatTabView DataContext="{Binding ChatTabViewModel}"/>
                </TabItem>

                <!-- MODULE 1: CONFIG -->
                <TabItem Header="[ SYS_CONFIG ]">
                    <views:ConfigTabView DataContext="{Binding ConfigTabViewModel}"/>
                </TabItem>

                <!-- MODULE 2: TASKS -->
                <TabItem Header="[ SCHEDULER ]">
                    <views:TasksTabView DataContext="{Binding TasksTabViewModel}"/>
                </TabItem>

                <!-- MODULE 3: HISTORY -->
                <TabItem Header="[ ARCHIVES ]">
                    <views:HistoryTabView DataContext="{Binding HistoryTabViewModel}"/>
                </TabItem>

                <!-- MODULE 4: MEMORY -->
                <TabItem Header="[ KNOWLEDGE ]">
                    <views:MemoryTabView DataContext="{Binding MemoryTabViewModel}"/>
                </TabItem>

                <!-- MODULE 5: LOGS -->
                <TabItem Header="[ SYS_LOGS ]">
                    <views:LogsTabView DataContext="{Binding LogsTabViewModel}"/>
                </TabItem>

                <!-- MODULE 6: ABOUT -->
                <TabItem Header="[ DIAGNOSTIC ]">
                    <views:AboutTabView DataContext="{Binding AboutTabViewModel}"/>
                </TabItem>
            </TabControl>

            <!-- CONFIG SAVE/RESET FOOTER (Only visible when CONFIG is active) -->
            <Border Grid.Row="1"
                    Padding="12,8"
                    Background="{DynamicResource DosInputBackgroundBrush}"
                    IsVisible="{Binding IsShowConfigSaveReset}">

                        
                    <StackPanel Grid.Column="1" 
                                HorizontalAlignment="Right"
                                Orientation="Horizontal"
                                Spacing="12">
                        <Button Content="[COMMIT_CHANGES]"
                                Command="{Binding SaveConfigCommand}"
                                BorderBrush="{DynamicResource DosHighlightBrush}"
                                BorderThickness="1"
                                Background="Transparent"
                                Foreground="{DynamicResource DosHighlightBrush}"
                                Padding="16,4"/>
                        <Button Content="[ROLLBACK]"
                                Command="{Binding ResetConfigCommand}"
                                BorderThickness="0"
                                Background="Transparent"
                                Foreground="{DynamicResource DosSecondaryBrush}"
                                Padding="16,4"/>
                    </StackPanel>
            </Border>
        </Grid>
    </Border>

</Window>
